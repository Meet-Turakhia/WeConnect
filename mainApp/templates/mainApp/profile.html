{% extends 'mainApp/base.html' %}
{% load static %}

{% block content %}


<div class='container' style='width: 70%; margin-top: 2%'>
    <h1>
        <center style='font-family: "Roboto Slab", Serif'>Profile Page</center>
    </h1>
    <br>
    <div class='row' style='margin-top: 2%'>
        <div class="col">
            <img src='{{profile.profile.image.url}}' class="rounded-circle mb-2" alt="100x100" width="180" height="180"
                style='border-radius: 50%'>
        </div>
        <div class='col'>
            <h3 class='d-inline mr-3'>{{profile.username}}</h3>
            {% if profile.id != user.id %}
            <form action='/app/follows/{{profile.id}}' method="POST" class='d-inline'>
                {% csrf_token %}
                {%if follows %}
                <button class='btn btn-dark rounded-0 mb-1' type='submit'> <i
                        class='fas fa-user-minus'></i></button><br><br>
                {% else %}
                <button class='btn btn-dark rounded-0 mb-1' type='submit'><i
                        class='fas fa-user-plus'></i></button><br><br>
                {% endif %}
            </form>
            {% endif %}
            {% if profile.id == user.id %}
            <a href="{% url 'editprofile' %}"><button type='submit' name='edit_user'
                    class='btn btn-light border border-dark d-inline' style='margin-bottom:4%'>
                    <i class='fa fa-edit'></i>
                </button></a><br>
            {% endif %}
            <h5 class='d-inline mr-3'>Followers: {{follower_count}}</h5>
            <h5 class='d-inline mr-3'>Following: {{following_count}}</h5>
            <h5 class='d-inline mr-3'>Posts: {{posts_count}}</h5>
            <hr style='border-color: black'>
            <h4 class='d-inline mr-3'><b style='font-weight: 500'>{{profile.username}}</b></h4><br>
            <h5 class='d-inline mr-3'>{{profile.desc}} </h5>
        </div>
    </div>
    <hr style='border-color: black'><br>
</div>


<div class=" card-deck mb-3" style='margin-left: 4%'>
    {% for post in posts%}
    <div class='card'>
        <div class="card-header ">
            <div class="row">
                <div class="col-sm">
                    <div class="text" style='font-size: 0.9rem'>{{post.loc}}</div>
                </div>
                {% if profile.id == user.id %}
                {% if post.author_id == user.id %}
                <div class="col-sm text-right">
                    <a href="/app/post/{{post.id}}"><i class="fa fa-edit icon-4x"></i></a>
                    <a href="/app/post_delete/{{post.id}}" type="submit"><i class="fa fa-trash pl-3 icon-4x"></i></a>
                </div>
                {% endif %}
                {% endif %}
            </div>
        </div>
        <img class="card-img-top" src="{{post.image.url}}" alt="Card image cap">
        <hr class='divider'>
        <div class="card-body">
            <h5 class="card-title" style='font-weight: 500'>{{post.title}}</h5>
            <h6 class='mb-5'>
                <p class="card-text">{{post.desc}}</p>
            </h6>
            <div class='row'>
                <div class='col-sm'>
                    {% if post.id not in liked_post_ids %}
                    <h4 class='d-inline'><a href='/app/{{post.id}}' class='far fa-thumbs-up'
                            style='text-decoration:none'>{{post.likes}}</a>
                    </h4>
                    {% else %}
                    <h4 class='d-inline'><a href='/app/{{post.id}}' class='fa fa-thumbs-up'
                            style='text-decoration:none'>{{post.likes}}</a>
                    </h4>
                    {% endif %}
                    <h4 class='d-inline pl-1'><a href='' class='far fa-comment' style='text-decoration:none'></a>
                    </h4>
                    <h4 class='d-inline pl-1'><a href='' class='far fa-bookmark' style='text-decoration:none'></a>
                    </h4>
                </div>
                <div class="col-sm">
                    <p class="card-text float-right pr"><small class="text-muted">{{post.timestamp}}</small></p>
                </div>
            </div>
        </div>
        <div class="card-footer">
            <div class="input-group">
                <input type="text" class="form-control" placeholder="Comment" aria-describedby="basic-addon2">
                <div class="input-group-append">
                    <button class="btn btn-dark " type="button">Post</button>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}